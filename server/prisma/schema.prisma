generator client {
  provider = "prisma-client-js"
  // output é opcional
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum TipoCategoria {
  ALIMENTACAO
  MORADIA
  TRANSPORTE
  SAUDE
  EDUCACAO
  LAZER
  ROUPAS
  SERVICOS
  OUTROS
}

model Categoria {
  id     String        @id @default(auto()) @map("_id") @db.ObjectId // mapeia o nome da col
  nome   TipoCategoria @unique
  gastos Gasto[] // Referência dos gastos

  @@map("categorias")
}

model Gasto {
  id          String     @id @default(auto()) @map("_id") @db.ObjectId // mapeia o nome da col
  nome        String // cinema
  descricao   String? // saida ao cinema com amigos
  preco       Float // valor do ingresso
  data        DateTime   @default(now()) // 08-10-2025
  categoria   Categoria? @relation(fields: [categoriaId], references: [id]) // Referência da categoria
  categoriaId String?    @db.ObjectId // Id da categoria

  @@index([categoriaId]) // indice de categoria
  @@index([data]) // indice por data
  @@map("gastos") // mapeia o nome do banco
}
